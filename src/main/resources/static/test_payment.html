<!DOCTYPE html>
<html>
<head>
    <title>Mercado Pago Test</title>
</head>
<body>
<form id="payment-form">
    <div class="mp-field">
        <label for="cardNumber">Card Number:</label>
        <input type="text" id="cardNumber" data-checkout="cardNumber" required>
    </div>
    <div class="mp-field">
        <label for="cardholderName">Cardholder Name:</label>
        <input type="text" id="cardholderName" data-checkout="cardholderName" required>
    </div>
    <div class="mp-field">
        <label for="cardExpirationMonth">Expiration Month:</label>
        <input type="text" id="cardExpirationMonth" data-checkout="cardExpirationMonth" required>
    </div>
    <div class="mp-field">
        <label for="cardExpirationYear">Expiration Year:</label>
        <input type="text" id="cardExpirationYear" data-checkout="cardExpirationYear" required>
    </div>
    <div class="mp-field">
        <label for="cardCVV">CVV:</label>
        <input type="text" id="cardCVV" data-checkout="cardCVV" required>
    </div>
    <button type="submit">Get Token</button>
</form>

<script src="https://sdk.mercadopago.com/js/v2"></script>
<script>
    const mp = new MercadoPago("APP_USR-463ef703-1996-4dcf-9b9a-a2a8a23302fa"); // Your Public Key - CHECK THIS AGAIN
    const form = document.getElementById('payment-form');

    mp.checkout({
        render: {
            container: '#payment-form',
            fields: {
                cardholderName: {
                    placeholder: "Cardholder Name"
                },
                cardNumber: {
                    placeholder: "Card Number"
                },
                cardExpirationMonth: {
                    placeholder: "MM"
                },
                cardExpirationYear: {
                    placeholder: "YYYY"
                },
                cardCVV: {
                    placeholder: "CVV"
                }
            }
        }
    });

    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        console.log("Form submitted"); // Check if the event listener is working

        try {
            const token = await mp.createToken(form);
            console.log("Test Token:", token.id);

            alert("Token generated! Check the console."); // User feedback

        } catch (error) {
            console.error("Error creating token:", error);
            alert("Error generating token. Check the console for details."); // User feedback
        }
    });
</script>
</body>
</html>